2025-11-30 18:53:31,232 - GenEC - INFO - Initializing GenEC pipeline
2025-11-30 18:53:31,233 - GenEC.LLMInterface - INFO - AST-based chunking enabled for token optimization
2025-11-30 18:53:31,263 - GenEC - INFO - Using Eclipse JDT for code generation
2025-11-30 18:53:31,263 - GenEC - INFO - Structural transformation stage enabled (max_methods=40, max_fields=20)
2025-11-30 18:53:31,263 - GenEC - INFO - Refactoring application enabled [LIVE]
2025-11-30 18:53:31,263 - GenEC - INFO - ================================================================================
2025-11-30 18:53:31,263 - GenEC - INFO - Running GenEC pipeline on /Users/uditanshutomar/commons-lang-fresh/src/main/java/org/apache/commons/lang3/ArrayUtils.java
2025-11-30 18:53:31,263 - GenEC - INFO - ================================================================================
2025-11-30 18:53:31,274 - GenEC - INFO -
[Stage 1/6] Analyzing static dependencies...
Failed to parse /Users/uditanshutomar/commons-lang-fresh/src/main/java/org/apache/commons/lang3/ArrayUtils.java:
Primary parser failed for /Users/uditanshutomar/commons-lang-fresh/src/main/java/org/apache/commons/lang3/ArrayUtils.java; attempting tree-sitter fallback.
Failed to parse source content:
2025-11-30 18:53:31,729 - GenEC - INFO - Original metrics: {'lcom5': 0.9920212765957447, 'tcc': 0.06823184152604549, 'cbo': 17, 'num_methods': 377, 'num_fields': 25}
2025-11-30 18:53:31,730 - GenEC - INFO -
[Stage 2/6] Mining evolutionary coupling from Git history...
2025-11-30 18:53:31,768 - GenEC - INFO -
[Stage 3/6] Building and fusing dependency graphs...
2025-11-30 18:53:31,820 - GenEC - INFO - Graph metrics: {'num_nodes': 407, 'num_edges': 5245, 'density': 0.06348264968954624, 'num_components': 57, 'avg_clustering': 0.6032407768003689, 'avg_degree': 25.773955773955773}
2025-11-30 18:53:31,821 - GenEC - INFO -
[Stage 4/6] Detecting and ranking clusters...
2025-11-30 18:53:31,821 - GenEC.ClusterDetector - INFO - Detecting clusters using Louvain algorithm
2025-11-30 18:53:31,821 - GenEC.ClusterDetector - INFO - Running Louvain on graph with 407 nodes and 5245 edges
2025-11-30 18:53:31,865 - GenEC.ClusterDetector - INFO - Louvain partition completed
2025-11-30 18:53:31,868 - GenEC.ClusterDetector - INFO - Graph modularity: 0.6045
2025-11-30 18:53:31,871 - GenEC.ClusterDetector - INFO - Detected 62 clusters
2025-11-30 18:53:31,871 - GenEC.ClusterDetector - INFO - Filtering clusters by size and quality
LLM validation failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDH5gFXCrSBHYFcvSf'}
Transformation analysis failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDJJrC1N1Eb6hEZZMx'}
2025-11-30 18:53:32,392 - GenEC.ClusterDetector - INFO - Cluster 49 cannot be safely extracted: 9 blocking issues
2025-11-30 18:53:32,394 - GenEC.ClusterDetector - INFO - Filtered: 51 passed, 11 rejected
2025-11-30 18:53:32,394 - GenEC.ClusterDetector - INFO - Rejection breakdown:
2025-11-30 18:53:32,394 - GenEC.ClusterDetector - INFO -   - too_large: 5 clusters
2025-11-30 18:53:32,394 - GenEC.ClusterDetector - INFO -   - no_methods: 5 clusters
2025-11-30 18:53:32,394 - GenEC.ClusterDetector - INFO -   - extraction_issues: 1 clusters
2025-11-30 18:53:32,395 - GenEC.ClusterDetector - INFO - Ranking clusters by quality
2025-11-30 18:53:32,395 - GenEC - INFO - Clusters: 62 detected, 51 filtered, 51 ranked
2025-11-30 18:53:32,395 - GenEC - INFO -
[Stage 5/6] Generating refactoring suggestions...
2025-11-30 18:53:32,395 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 5
2025-11-30 18:53:32,395 - genec.core.cluster_context_builder - INFO - Cluster 5: Generated context with ~219 tokens (1 methods, 0 fields)
2025-11-30 18:53:32,560 - GenEC.LLMInterface - ERROR - Error calling LLM: LLMRequestFailed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDK21buNdy9VejTKo4'}
2025-11-30 18:53:32,560 - GenEC.LLMInterface - ERROR - LLM call failed (attempt 1): LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDK21buNdy9VejTKo4'}
2025-11-30 18:53:32,560 - GenEC.LLMInterface - INFO - Retrying in 1 seconds...
2025-11-30 18:53:33,685 - GenEC.LLMInterface - ERROR - Error calling LLM: LLMRequestFailed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDPqUZhGuFMfgMZ29v'}
2025-11-30 18:53:33,686 - GenEC.LLMInterface - ERROR - LLM call failed (attempt 2): LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDPqUZhGuFMfgMZ29v'}
2025-11-30 18:53:33,686 - GenEC.LLMInterface - INFO - Retrying in 2 seconds...
2025-11-30 18:53:35,859 - GenEC.LLMInterface - ERROR - Error calling LLM: LLMRequestFailed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDZA4pqrXhQj8kvj7C'}
2025-11-30 18:53:35,859 - GenEC.LLMInterface - ERROR - LLM call failed (attempt 3): LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDZA4pqrXhQj8kvj7C'}
2025-11-30 18:53:35,859 - GenEC - ERROR - Failed to generate suggestion for cluster 5: LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDZA4pqrXhQj8kvj7C'}
2025-11-30 18:53:35,859 - GenEC - INFO - Generated 0 suggestions
2025-11-30 18:53:35,859 - GenEC - WARNING - No suggestions from ranked clusters; attempting field-based fallback.
2025-11-30 18:53:35,892 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 0
2025-11-30 18:53:35,892 - genec.core.cluster_context_builder - INFO - Cluster 0: Generated context with ~503 tokens (3 methods, 1 fields)
2025-11-30 18:53:36,054 - GenEC.LLMInterface - ERROR - Error calling LLM: LLMRequestFailed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDZmGtqoKe4vLSEJ1R'}
2025-11-30 18:53:36,054 - GenEC.LLMInterface - ERROR - LLM call failed (attempt 1): LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDZmGtqoKe4vLSEJ1R'}
2025-11-30 18:53:36,054 - GenEC.LLMInterface - INFO - Retrying in 1 seconds...
2025-11-30 18:53:37,192 - GenEC.LLMInterface - ERROR - Error calling LLM: LLMRequestFailed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDekRCrmGCbkHqNtWx'}
2025-11-30 18:53:37,192 - GenEC.LLMInterface - ERROR - LLM call failed (attempt 2): LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDekRCrmGCbkHqNtWx'}
2025-11-30 18:53:37,193 - GenEC.LLMInterface - INFO - Retrying in 2 seconds...
2025-11-30 18:53:39,367 - GenEC.LLMInterface - ERROR - Error calling LLM: LLMRequestFailed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDosqsFX6dHHTWpwPZ'}
2025-11-30 18:53:39,368 - GenEC.LLMInterface - ERROR - LLM call failed (attempt 3): LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDosqsFX6dHHTWpwPZ'}
2025-11-30 18:53:39,368 - GenEC - ERROR - Failed to generate fallback suggestion: LLM call failed: Anthropic request failed after 1 attempts. Last error: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CVfDDosqsFX6dHHTWpwPZ'}
2025-11-30 18:53:39,368 - GenEC - WARNING - No suggestions to verify; skipping verification stage.
2025-11-30 18:53:39,368 - GenEC - INFO -
================================================================================
2025-11-30 18:53:39,368 - GenEC - INFO - PIPELINE SUMMARY
2025-11-30 18:53:39,368 - GenEC - INFO - ================================================================================
2025-11-30 18:53:39,368 - GenEC - INFO - Class: ArrayUtils
2025-11-30 18:53:39,368 - GenEC - INFO - Clusters detected: 62
2025-11-30 18:53:39,368 - GenEC - INFO - Suggestions generated: 0
2025-11-30 18:53:39,368 - GenEC - INFO - Verified suggestions: 0
2025-11-30 18:53:39,368 - GenEC - INFO - Execution time: 8.11 seconds
2025-11-30 18:53:39,368 - GenEC - INFO - ================================================================================

==================================================
Refactoring Completed Successfully
==================================================
Original Metrics: {'lcom5': 0.9920212765957447, 'tcc': 0.06823184152604549, 'cbo': 17, 'num_methods': 377, 'num_fields': 25}
Suggestions Generated: 0
Verified Suggestions: 0
