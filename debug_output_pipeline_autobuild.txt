2025-12-03 20:52:56,673 - GenEC - INFO - Initializing GenEC pipeline
2025-12-03 20:52:56,673 - genec.utils.dependency_manager - INFO - Missing 2 dependencies: Eclipse JDT Wrapper, Spoon Wrapper
2025-12-03 20:52:56,673 - genec.utils.dependency_manager - INFO - Building Eclipse JDT Wrapper...
2025-12-03 20:53:00,533 - genec.utils.dependency_manager - INFO - Successfully built Eclipse JDT Wrapper
2025-12-03 20:53:00,534 - genec.utils.dependency_manager - INFO - Building Spoon Wrapper...
2025-12-03 20:53:02,980 - genec.utils.dependency_manager - INFO - Successfully built Spoon Wrapper
2025-12-03 20:53:03,375 - GenEC.LLMInterface - INFO - AST-based chunking enabled for token optimization
2025-12-03 20:53:03,375 - GenEC.LLMInterface - INFO - Hybrid mode enabled: LLM for naming + JDT for code generation
2025-12-03 20:53:03,417 - GenEC - INFO - Using Eclipse JDT for code generation
2025-12-03 20:53:03,417 - GenEC - INFO - Structural transformation stage enabled (max_methods=40, max_fields=20)
2025-12-03 20:53:03,417 - GenEC - INFO - Refactoring application enabled [LIVE]
2025-12-03 20:53:03,417 - genec - INFO - Running GenEC on /Users/uditanshutomar/commons-io/src/main/java/org/apache/commons/io/IOUtils.java...
2025-12-03 20:53:03,417 - GenEC - INFO - ================================================================================
2025-12-03 20:53:03,417 - GenEC - INFO - Running GenEC pipeline on /Users/uditanshutomar/commons-io/src/main/java/org/apache/commons/io/IOUtils.java
2025-12-03 20:53:03,417 - GenEC - INFO - ================================================================================
2025-12-03 20:53:03,457 - GenEC - INFO - 
[Stage 1/6] Analyzing static dependencies...
2025-12-03 20:53:06,776 - GenEC - INFO - Original metrics: {'lcom5': 1.0, 'tcc': 0.05699690818658422, 'cbo': 37, 'num_methods': 173, 'num_fields': 11}
2025-12-03 20:53:06,777 - GenEC - INFO - 
[Stage 2/6] Mining evolutionary coupling from Git history...
Spoon analysis failed, falling back to JavaParser: Error calling Spoon wrapper: Spoon process failed with exit code 1
stdout: 
stderr: SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
{
  "success": false,
  "message": "Analysis failed: PartialSourcePosition only contains a CompilationUnit",
  "error": "UnsupportedOperationException"
}

Spoon analysis failed, falling back to JavaParser: Error calling Spoon wrapper: Spoon process failed with exit code 1
stdout: 
stderr: SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
{
  "success": false,
  "message": "Analysis failed: PartialSourcePosition only contains a CompilationUnit",
  "error": "UnsupportedOperationException"
}

Spoon analysis failed, falling back to JavaParser: Error calling Spoon wrapper: Spoon process failed with exit code 1
stdout: 
stderr: SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
{
  "success": false,
  "message": "Analysis failed: PartialSourcePosition only contains a CompilationUnit",
  "error": "UnsupportedOperationException"
}

2025-12-03 21:03:06,399 - GenEC - INFO - 
[Stage 3/6] Building and fusing dependency graphs...
2025-12-03 21:03:06,476 - GenEC - INFO - Calculated 4 centrality metrics
2025-12-03 21:03:06,480 - GenEC - INFO - Graph metrics: {'num_nodes': 184, 'num_edges': 856, 'density': 0.05084343074364457, 'num_components': 32, 'avg_clustering': 0.7244838673141278, 'avg_degree': 9.304347826086957}
2025-12-03 21:03:06,480 - GenEC - INFO - 
[Stage 4/6] Detecting and ranking clusters...
2025-12-03 21:03:06,539 - GenEC - INFO - Clusters: 36 detected, 11 filtered, 11 ranked
2025-12-03 21:03:06,540 - GenEC - INFO - 
[Stage 5/6] Generating refactoring suggestions (top 5)...
2025-12-03 21:03:06,540 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 11
2025-12-03 21:03:06,540 - GenEC.LLMInterface - INFO - Using hybrid mode: LLM for naming, JDT for code
2025-12-03 21:03:16,334 - GenEC.LLMInterface - INFO - LLM suggested name: BoundsValidator
2025-12-03 21:03:19,661 - GenEC.LLMInterface - INFO - JDT code generation successful
2025-12-03 21:03:22,381 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 10
2025-12-03 21:03:22,382 - GenEC.LLMInterface - INFO - Using hybrid mode: LLM for naming, JDT for code
2025-12-03 21:03:33,325 - GenEC.LLMInterface - INFO - LLM suggested name: BoundsValidator
2025-12-03 21:03:35,039 - GenEC.LLMInterface - INFO - JDT code generation successful
2025-12-03 21:03:37,395 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 19
2025-12-03 21:03:37,395 - GenEC.LLMInterface - INFO - Using hybrid mode: LLM for naming, JDT for code
2025-12-03 21:03:49,158 - GenEC.LLMInterface - INFO - LLM suggested name: LineIteratorFactory
2025-12-03 21:03:53,336 - GenEC.LLMInterface - INFO - JDT code generation successful
2025-12-03 21:03:56,204 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 15
2025-12-03 21:03:56,205 - GenEC.LLMInterface - INFO - Using hybrid mode: LLM for naming, JDT for code
2025-12-03 21:04:06,914 - GenEC.LLMInterface - INFO - LLM suggested name: StreamDataTransfer
2025-12-03 21:04:09,813 - GenEC.LLMInterface - INFO - JDT code generation successful
2025-12-03 21:04:11,661 - GenEC.LLMInterface - INFO - Generating refactoring suggestion for cluster 13
2025-12-03 21:04:11,662 - GenEC.LLMInterface - INFO - Using hybrid mode: LLM for naming, JDT for code
2025-12-03 21:04:23,299 - GenEC.LLMInterface - INFO - LLM suggested name: ResourceCloser
2025-12-03 21:04:24,622 - GenEC.LLMInterface - INFO - JDT code generation successful
2025-12-03 21:04:25,925 - GenEC - INFO - Generated 5 suggestions
2025-12-03 21:04:25,925 - GenEC - INFO - 
[Stage 6/6] Verifying refactoring suggestions...
2025-12-03 21:04:25,925 - GenEC - INFO - Verifying 5 suggestions in parallel (max_workers=4)
2025-12-03 21:04:25,927 - GenEC - INFO - Verifying suggestion: BoundsValidator
2025-12-03 21:04:25,928 - GenEC - INFO - Verifying suggestion: BoundsValidator
2025-12-03 21:04:25,928 - GenEC - INFO - Verifying suggestion: LineIteratorFactory
2025-12-03 21:04:25,928 - GenEC - INFO - Verifying suggestion: StreamDataTransfer
2025-12-03 21:05:54,773 - GenEC - INFO - Verifying suggestion: ResourceCloser
2025-12-03 21:05:54,773 - GenEC - INFO - Suggestion BoundsValidator PASSED all verification layers
2025-12-03 21:05:55,701 - GenEC - INFO - Suggestion BoundsValidator PASSED all verification layers
2025-12-03 21:05:56,600 - GenEC - INFO - Suggestion LineIteratorFactory PASSED all verification layers
2025-12-03 21:05:57,942 - GenEC - INFO - Suggestion StreamDataTransfer PASSED all verification layers
2025-12-03 21:06:34,307 - GenEC - INFO - Suggestion ResourceCloser PASSED all verification layers
2025-12-03 21:06:34,308 - GenEC - INFO - 
[Stage 7/7] Applying verified refactorings...
2025-12-03 21:06:34,336 - GenEC - INFO - 
================================================================================
REFACTORING PREVIEW SUMMARY (5 refactorings)
================================================================================

Total Impact:
  Files created:  5
  Files modified: 5
  Lines added:    +711
  Lines removed:  -32

Refactorings:
  1. ❌ BoundsValidator (+124 -10)
  2. ❌ BoundsValidator (+111 -4)
  3. ❌ LineIteratorFactory (+102 -6)
  4. ❌ StreamDataTransfer (+207 -12)
  5. ❌ ResourceCloser (+167 -0)

================================================================================
⚠️  5 refactoring(s) cannot be applied
================================================================================
2025-12-03 21:06:34,660 - GenEC - INFO - Successfully applied all refactorings transactionally
2025-12-03 21:06:34,660 - GenEC - INFO - 
================================================================================
2025-12-03 21:06:34,660 - GenEC - INFO - PIPELINE SUMMARY
2025-12-03 21:06:34,660 - GenEC - INFO - ================================================================================
2025-12-03 21:06:34,660 - GenEC - INFO - Class: IOUtils
2025-12-03 21:06:34,660 - GenEC - INFO - Clusters detected: 36
2025-12-03 21:06:34,661 - GenEC - INFO - Suggestions generated: 5
2025-12-03 21:06:34,661 - GenEC - INFO - Verified suggestions: 5
2025-12-03 21:06:34,661 - GenEC - INFO - Applied refactorings: 5/5
2025-12-03 21:06:34,661 - GenEC - INFO - Execution time: 811.24 seconds
2025-12-03 21:06:34,661 - GenEC - INFO - ================================================================================

==================================================
Refactoring Completed Successfully
==================================================
Original Metrics: {'lcom5': 1.0, 'tcc': 0.05699690818658422, 'cbo': 37, 'num_methods': 173, 'num_fields': 11}
Suggestions Generated: 5
Verified Suggestions: 5

Verified Suggestions:
1. BoundsValidator
2. BoundsValidator
3. LineIteratorFactory
4. StreamDataTransfer
5. ResourceCloser
2025-12-03 21:06:34,661 - genec - INFO - Cleaned up artifact: /Users/uditanshutomar/commons-io/src/main/java/org/apache/commons/io/generated.java
